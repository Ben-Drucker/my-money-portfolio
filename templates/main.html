<!DOCTYPE html>
<html>

<head>
    <title>Portfolio</title>
    <link rel="shortcut icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="../static/js/scripts.js"></script>
    <script src="{{ url_for('static', filename='js/pie.js')}}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/emn178/chartjs-plugin-labels/src/chartjs-plugin-labels.js"></script>

    <link rel="preload" href="../static/css/fonts/Fira Code/FiraCode-Regular.woff2" as="font" crossorigin="anonymous" />
    <link rel="preload" href="../static/css/fonts/Fira Code/FiraCode-Medium.woff2" as="font" crossorigin="anonymous" />
    <link rel="preload" href="../static/css/fonts/Fira Code/FiraCode-Light.woff2" as="font" crossorigin="anonymous" />
</head>



<body>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <ul>
        <li onclick="document.location.reload();"> Home </li>
        <li onclick="window.location.replace('http:\/\/about.mymoneyportfol.io/');"> About Me</li>
        <li onclick="document.location.replace('http:\/\/about.mymoneyportfol.io/howitworks');"> How does it work?</li>
        <li onclick="document.location = '/';"> Login </li>
    </ul>

    <div>
        <h1>Welcome to the portfolio analyser!</h1>
    </div>
    <div>
        <button type="button" id="addBankButton" class="bank" onclick="largeDiv('bank_popout');">
            Click here to add a bank üè¶
        </button>
    </div>
    <div class="grid">
        <div class="grid_item"></div>
        <div class="popout grid_item" id="bank_popout" hidden="true">
            <p>We use <a href="http://www.plaid.com">Plaid</a> to connect your financial institution.</p>
            <button type="button" class="plaid_button" onclick="plaid_init();">
                Click here to use Plaid.
            </button>
            <h5 id="resultsHeader" hidden=true>Please select which accounts you'd like to import:</h5>
            <p id="results" hidden=true>
            <form id='select_bank_form' style="display: none;">
                <div>
                    <input class="plaid_button" type='submit' value='Submit &#8680;' style="text-align: center;">
                </div>
            </form>
            </p>
        </div>
        <div class="grid_item"></div>
    </div>
    <div>
        <button type="button" id="addCryptoButton" class="crypto" onclick="largeDiv('crypto_popout')">
            Click here to add a crypto üîí
        </button>
    </div>
    <div class="grid">
        <div class="grid_item"></div>
        <div class="popout grid_item" id="crypto_popout" hidden="true">
            <p>
                <img src="{{ url_for('static', filename='Images/noun_Hard Hat_1022.svg') }}" style="height: 35px;">
                Currently Under Construction. Please Check Back Later.
                <img src="{{ url_for('static', filename='Images/noun_Hard Hat_1022.svg') }}" style="height: 35px;">
            </p>
            <!-- <p>
                <img src="{{ url_for('static', filename='Images/noun_Hard Hat_1022.svg') }}" style="height: 35px;">
                Currently Under Construction. Please Check Back Later.
                <img src="{{ url_for('static', filename='Images/noun_Hard Hat_1022.svg') }}" style="height: 35px;">
            </p> -->

        </div>
        <div class="grid_item"></div>
    </div>
    <div>
        <button type="button" id="addStockButton" class="stock" onclick="largeDiv('stock_popout')">
            Click here to add a stock üìà
        </button>
    </div>
    <div class="grid">
        <div class="grid_item"></div>
        <div class="popout grid_item" id="stock_popout" hidden="true" style="padding: 10px;">
            <div style="position: relative;">
                <div id='stock_import_options' class='button_grid_3'>
                    <div class='grid_item'>
                        <button class='grid_item skinny_button'>Click here to import stock information via Plaid.</button>
                    </div>
                    <div class='grid_item'>
                        <button id='manual_stock_insertion_button' class='grid_item skinny_button' onclick="document.getElementById('stock_table_div').style.display='inline';document.getElementById('stock_import_options').style.display='none'">Click here to manually enter your stock data</button>
                    </div>
                    <div class='grid_item'>
                        <button class='grid_item skinny_button'>Click here to upload a CSV file with your stock data.</button>
                    </div>
                </div>
                <div id="stock_table_div" style="display: none;">
                    <form id="stock_input_form" style="text-align: center;">
                        <table id="stock_input_table">
                            <tr>
                                <th>Stock Symbol</th>
                                <td>Purchase Date (mm-dd-yyyy)</td>
                                <td>Purchase Price ($x.xx)</td>
                            </tr>
                            <tr>
                                <td><input id="ss1" name="ss1"></td>
                                <td><input id="pd1" name="pd1"></td>
                                <td><input id="pp1" name="pp1"></td>
                            </tr>

                            <tr>
                                <td><input id="ss2" name="ss2"></td>
                                <td><input id="pd2" name="pd2"></td>
                                <td><input id="pp2" name="pp2"></td>
                            </tr>

                            <tr>
                                <td><input id="ss3" name="ss3"></td>
                                <td><input id="pd3" name="pd3"></td>
                                <td><input id="pp3" name="pp3"></td>
                            </tr>

                        </table>

                        <div>
                            <svg onclick="document.getElementById('stock_input_table').innerHTML += '<tr><td><input></td><td><input></td><td><input></td></tr>';" width="600px" viewBox="0 0 132.4 14.6" style="display: inline-flex;">
                                <a class="inner_pop">
                                    <g class="inner_pop" transform="translate(5, 5)" fill="none">
                                        <path stroke="grey" stroke-width='0.5px' d="M 6.3034215,4.4431015 H 10.17705 M 0.1322915,0.1322915 c 0,4.45874 6.17113,4.31081 6.17113,4.31081 m -6.17113,-4.31081 H 122.26835 c 0,4.45874 -6.17113,4.31081 -6.17113,4.31081 H 10.17705" stroke-linecap="round" stroke-linejoin="round" stroke-width="1px" />
                                    </g>
                                    <text class="inner_pop" x="50%" y=50% style="font-size: 15%;" text-anchor="middle" dominant-baseline="middle">
                                        Click here to add another row.
                                    </text>
                                </a>
                            </svg>
                        </div>
                        <button type="submit">Click here to submit your stock positions.</button>
                    </form>
                    <button style="width: auto; position: absolute; left: 0px; bottom: 0px" type="button" onclick="document.getElementById('stock_table_div').style.display='none';document.getElementById('stock_import_options').style.display='grid';"> Go Back </button>
                </div>
            </div>
        </div>
        <div class="grid_item"></div>
    </div>
</body>

<div id="message_hider" hidden=true>
    <div id="messages_div">
        <div class=message_grid_item><img src='../static/Images/alert-circle.svg' id="info_icon"></img></div>
        <div class=message_grid_item id="message_grid_item_p">
            <p id="messages" style="text-align: center;"></p>
        </div>


    </div>
</div>

<div id="port_vis" style="text-align: center;">

    <span id="splashscreen">
        When you add financial accounts, statistics and visualizations for your portfolio will appear here. <br>
        Click one of the buttons above to get started!
    </span>

    <div class="grid203050" id="replacementdata" style="display: none;">
        <div class="grid_item" id="selected_accounts">

        </div>
        <div class="grid_item" id="net_worth">

        </div>
        <div class="grid_item" id="pie_chart">
            <canvas id="myChart" width="300" height="300" style="max-width: 300px; max-height: 300px; display: inline-block"></canvas>
            <canvas id="myChart_debt" width="300" height="300" style="max-width: 300px; max-height: 300px; display: inline-block"></canvas>
        </div>
    </div>
</div>

<script>

    labels = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i'];

    let colors = []
    for (let i = 0; i < labels.length; i++) {
        base = "rgb(";
        b = 240 - 35 * i
        g = 255 - 35 * i
        base += `0, ${g}, ${b}`
        base += ")";
        colors.push(base)
    }
    colors = [
        'rgb(0, 111, 255)',
        'rgb(0, 147, 255)',
        'rgb(0, 175, 255)',
        'rgb(0, 199, 255)',
        'rgb(0, 219, 227)',
        'rgb(0, 236, 197)',
        'rgb(122, 250, 173)',

    ]

    data = {
        labels: labels,
        datasets: [{
            label: 'Share of assets',
            backgroundColor: colors,
            borderColor: 'rgb(255, 255, 255)',
            borderWidth: .33,
            data: [],
        }]
    };

    config = {
        type: 'pie',
        data,
        options: {
            plugins: {
                labels: {
                    render: function (args) {
                        return `$${args.value}: ${args.label}`;
                    },
                    precision: 0,
                    showZero: true,
                    fontSize: 12,
                    fontColor: 'rgb(50, 50, 50)',
                    fontStyle: 'normal',
                    fontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
                    textShadow: true,
                    shadowBlur: 10,
                    shadowOffsetX: -5,
                    shadowOffsetY: 5,
                    shadowColor: 'rgba(255,0,0,0.75)',
                    arc: true,
                    position: 'outside',
                    overlap: true,
                    showActualPercentages: true,
                    outsidePadding: 4,
                    textMargin: 4
                }
            }
        }
    };

    var myChart = new Chart(
        document.getElementById('myChart'),
        config
    );
</script>

<script>
    labels_debt = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i'];

    let colors_debt = []
    for (let i = 0; i < labels_debt.length; i++) {
        base = "rgb(";
        b = 20 * i
        g = 20 * i
        base += `255, ${g}, ${b}`
        base += ")";
        colors_debt.push(base)
    }
    colors_debt = [
        'rgb(255, 0, 105)',
        'rgb(255, 113, 76)',
        'rgb(255, 182, 73)',
        'rgb(255, 241, 116)',
    ]

    data_debt = {
        labels: labels,
        datasets: [{
            label: 'Share of Debt',
            backgroundColor: colors_debt,
            borderColor: 'rgb(255, 255, 255)',
            borderWidth: .33,
            data: [],
        }]
    };

    config_debt = {
        type: 'pie',
        data: data_debt,
        options: {
            plugins: {
                labels: {
                    render: function (args) {
                        return `$${args.value}: ${args.label}`;
                    },
                    precision: 0,
                    showZero: true,
                    fontSize: 12,
                    fontColor: 'rgb(50, 50, 50)',
                    fontStyle: 'normal',
                    fontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
                    textShadow: true,
                    shadowBlur: 10,
                    shadowOffsetX: -5,
                    shadowOffsetY: 5,
                    shadowColor: 'rgba(255,0,0,0.75)',
                    arc: true,
                    position: 'outside',
                    overlap: true,
                    showActualPercentages: true,
                    outsidePadding: 4,
                    textMargin: 4
                }
            }
        }
    };

    var myChart_debt = new Chart(
        document.getElementById('myChart_debt'),
        config_debt
    );
</script>

</html>